\chapter{Specific Requirements}
This section is devoted to a specific description of every kind of requirement the
system has to deal with in order to achieve all the functionalities described.
\section{External interface Requirements}
\subsection{User Interfaces}
The mobile app is the interface which permit customers to enjoy CLup services. Whether installed on a smartphone or on a ticketing kiosk, it is the only way
for a customer to use CLup.
User interface mockups of most important pages of the app are shown below.

\vspace{0.5cm}
\begin{minipage}{.5\textwidth}
	\centering
	\includegraphics[scale=0.8]{home}
	\captionsetup{type=figure}
	\caption{App home.}
\end{minipage}%
\begin{minipage}{.5\textwidth}
	\centering
	\includegraphics[scale=0.8]{my_tickets}
	\captionsetup{type=figure}
	\caption{Tickets list.}
\end{minipage}

\clearpage

\begin{minipage}{.5\textwidth}
	\centering
	\includegraphics[scale=0.8]{store}
	\captionsetup{type=figure}
	\caption{Store page.}
\end{minipage}%
\begin{minipage}{.5\textwidth}
	\centering
	\includegraphics[scale=0.8]{ticket}
	\captionsetup{type=figure}
	\caption{Ticket Retrieved.}
\end{minipage}

\vspace{1cm}

\begin{minipage}{.5\textwidth}
	\centering
	\includegraphics[scale=0.8]{book1}
	\captionsetup{type=figure}
	\caption{Book a visit (1/2).}
\end{minipage}%
\begin{minipage}{.5\textwidth}
	\centering
	\includegraphics[scale=0.8]{book2}
	\captionsetup{type=figure}
	\caption{Book a visit (2/2).}
\end{minipage}

\vspace{1cm}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.8]{book3}
	\caption{Visit booked.}
\end{figure}

\clearpage

Store managers and store employees use a web based interface for enjoying CLup features. The CLup admins can login at the same interface as well.
User interface mockups of most important pages of the web dashboard are shown below.
\vspace{0.5cm}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.64\linewidth]{login}
	\caption{Dashboard login.}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.64\linewidth]{employee}
	\caption{Employee homepage.}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.64\linewidth]{dashboard1}
	\caption{Manager homepage.}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.64\linewidth]{dashboard2}
	\caption{Item categories page.}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.64\linewidth]{dashboard3}
	\caption{Bookings list page.}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.64\linewidth]{new_store}
	\caption{Admin new supermarket page.}
\end{figure}

\clearpage

\subsection{Hardware Interfaces}
In addition to interfacing with computers (via a web browser), Clup interfaces with smartphones and their GPS module.
\subsection{Software Interfaces}
The system interfaces with a external map API for computing the distance between current place and store. It also permit to receive data
about QR codes via the public API.
\subsection{Communication Interfaces}
All the communications from and to CLup are made via HTTPS.

\section{Functional Requirements}
In this section, it is given a complete description of the functional requirements of the system.

    \subsection{Requirements}
    \subsubsection{Customer}
        \begin{enumerate}[series=requirements, label=\textbf{R.\arabic*}, leftmargin=+.3in]
            \item \itemtext{req:custQueue}{The system shall allow customers to line-up remotely in a store queue.}
            \item \itemtext{req:custTicket}{The system shall generate a new ticket when a customer enters a queue.}
            \item \itemtext{req:custTicketKiosk}{The system shall allow customers which do not have a smartphone to get a ticket in place.}
            \item \itemtext{req:custNum}{The system shall allow customers to view the number of people lined up in a queue.}
            \item \itemtext{req:custTime}{The system shall give customers an estimated waiting time.}
            \item \itemtext{req:custGps}{The system shall retrieve the GPS position while the user is subscribed to a queue.}
            \item \itemtext{req:custLeave}{The system shall allow customers to leave a queue.}
            \item \itemtext{req:custFilter}{The system shall allow customers to filter stores by name.}
            \item \itemtext{req:custTtl}{The system shall notify customers when it's time to leave for the store.}
            \item \itemtext{req:custBook}{The system shall allow customers to book-a-visit to the store and send them the receipt via email.}
            \item \itemtext{req:custItems}{The system shall allow book-a-visit customers to specify the main categories of item they intend to buy.}
            \item \itemtext{req:custDelete}{The system shall allow customers to delete a booked visit.}
            \item \itemtext{req:custNotifyDelete}{The system shall notify customers when a ticket or booked visit is deleted.}
        \end{enumerate}

    \subsubsection{Store manager}
    \begin{enumerate}[resume*=requirements]
        \item \itemtext{req:mngLogin}{A registered store manager must be able to login to the system by using his/her credentials.}
        \item \itemtext{req:mngViewStore}{The system shall allow store managers to view the current status of people inside the store.}
        \item \itemtext{req:mngViewQueue}{The system shall allow store managers to view the current status of people in the queue.}
         \item \itemtext{req:mngViewBook}{The system shall allow store managers to view the booked visits to the store.}
        \item \itemtext{req:mngCapStore}{The system shall allow store managers to set a maximum cap of people inside the store.}
        \item \itemtext{req:mngCapQueue}{The system shall allow store managers to set a maximum cap of people in the queue.}
        \item \itemtext{req:mngDeleteTickets}{The system shall allow store managers to delete tickets and booked visits.}
    \end{enumerate}

    \subsubsection{Store staff}
    \begin{enumerate}[resume*=requirements]
        \item \itemtext{req:stfLogin}{A registered store staff must be able to login to the system by using his/her credentials.}
        \item \itemtext{req:stfViewStore}{The system shall allow store staff to view the current status of people inside the store.}
        \item \itemtext{req:stfViewQueue}{The system shall allow store staff to view the current status of people in the queue.}
    \end{enumerate}

    \subsubsection{CLup admin}
    \begin{enumerate}[resume*=requirements]
        \item \itemtext{req:admRegister}{The system shall allow CLup admins to register new supermarkets.}
        \item \itemtext{req:admCredentials}{The system shall generate new manager and staff credential for each supermarket registered.}
    \end{enumerate}

    \subsection{Goal mapping on requirements}

    \begin{description}
        \item[\ref{goal:avoidQueue}] \useitemtext{goal:avoidQueue} ~\\

        \begin{description}
            \item[\ref{goal:custHazardSit}] \useitemtext{goal:custHazardSit} ~\\

            \ref{req:custQueue} \useitemtext{req:custQueue} ~\\
            \ref{req:custNum} \useitemtext{req:custNum} ~\\
            \ref{req:custTime} \useitemtext{req:custTime} ~\\
            \ref{req:custTtl} \useitemtext{req:custTtl} ~\\
            \ref{req:custBook} \useitemtext{req:custBook} ~\\
            \ref{req:custItems} \useitemtext{req:custItems} ~\\

            \ref{dom:smartphone} \useitemtext{dom:smartphone} ~\\
            \ref{dom:categories} \useitemtext{dom:categories} ~\\
            \ref{dom:custEmail} \useitemtext{dom:custEmail} ~\\
            \ref{dom:oneToOneQr} \useitemtext{dom:oneToOneQr} ~\\
            \ref{dom:timeArrival} \useitemtext{dom:timeArrival} ~\\


            \item[\ref{goal:storeHazardSit}] \useitemtext{goal:storeHazardSit} ~\\

            \ref{req:mngViewStore} \useitemtext{req:mngViewStore} ~\\
            \ref{req:mngViewQueue} \useitemtext{req:mngViewQueue} ~\\
            \ref{req:mngViewBook} \useitemtext{req:mngViewBook} ~\\
            \ref{req:mngCapStore} \useitemtext{req:mngCapStore} ~\\
            \ref{req:mngCapQueue} \useitemtext{req:mngCapQueue} ~\\
            \ref{req:mngDeleteTickets} \useitemtext{req:mngDeleteTickets} ~\\
            \ref{req:stfViewStore} \useitemtext{req:stfViewStore} ~\\
            \ref{req:stfViewQueue} \useitemtext{req:stfViewQueue} ~\\

            \ref{dom:categories} \useitemtext{dom:categories} ~\\
            \ref{dom:oneToOneQr} \useitemtext{dom:oneToOneQr} ~\\
            \ref{dom:internetStores} \useitemtext{dom:internetStores} ~\\
            \ref{dom:employeeEntrance} \useitemtext{dom:employeeEntrance} ~\\
            \ref{dom:timeArrival} \useitemtext{dom:timeArrival} ~\\
            \ref{dom:capStores} \useitemtext{dom:capStores} ~\\


            \item[\ref{goal:shortenTime}] \useitemtext{goal:shortenTime} ~\\

            \ref{req:custQueue} \useitemtext{req:custQueue} ~\\
            \ref{req:custNum} \useitemtext{req:custNum} ~\\
            \ref{req:custTime} \useitemtext{req:custTime} ~\\
            \ref{req:custTtl} \useitemtext{req:custTtl} ~\\
            \ref{req:custBook} \useitemtext{req:custBook} ~\\

            \ref{dom:smartphone} \useitemtext{dom:smartphone} ~\\
            \ref{dom:workingGps} \useitemtext{dom:workingGps} ~\\
            \ref{dom:gpsPrecision} \useitemtext{dom:gpsPrecision} ~\\
            \ref{dom:bringSmartphone} \useitemtext{dom:bringSmartphone} ~\\
            \ref{dom:employeeEntrance} \useitemtext{dom:employeeEntrance} ~\\
            \ref{dom:qrServiceReliable} \useitemtext{dom:qrServiceReliable} ~\\
            \ref{dom:qrServiceApi} \useitemtext{dom:qrServiceApi} ~\\
            \ref{dom:timeArrival} \useitemtext{dom:timeArrival} ~\\



            \item[\ref{goal:arriveOnTime}] \useitemtext{goal:arriveOnTime} ~\\

            \ref{req:custQueue} \useitemtext{req:custQueue} ~\\
            \ref{req:custNum} \useitemtext{req:custNum} ~\\
            \ref{req:custTime} \useitemtext{req:custTime} ~\\
            \ref{req:custGps} \useitemtext{req:custGps} ~\\
            \ref{req:custTtl} \useitemtext{req:custTtl} ~\\
            \ref{req:custBook} \useitemtext{req:custBook} ~\\

            \ref{dom:smartphone} \useitemtext{dom:smartphone} ~\\
            \ref{dom:workingGps} \useitemtext{dom:workingGps} ~\\
            \ref{dom:gpsPrecision} \useitemtext{dom:gpsPrecision} ~\\
            \ref{dom:bringSmartphone} \useitemtext{dom:bringSmartphone} ~\\
            \ref{dom:timeArrival} \useitemtext{dom:timeArrival} ~\\
        \end{description}


        \item[\ref{goal:otherTasks}] \useitemtext{goal:otherTasks} ~\\

        \ref{req:custQueue} \useitemtext{req:custQueue} ~\\
        \ref{req:custNum}  \useitemtext{req:custNum} ~\\
        \ref{req:custTime} \useitemtext{req:custTime} ~\\
        \ref{req:custTtl} \useitemtext{req:custTtl} ~\\
        \ref{req:custBook} \useitemtext{req:custBook} ~\\

        \ref{dom:smartphone} \useitemtext{dom:smartphone} ~\\
        \ref{dom:workingGps} \useitemtext{dom:workingGps} ~\\
        \ref{dom:gpsPrecision} \useitemtext{dom:gpsPrecision} ~\\
        \ref{dom:custEmail} \useitemtext{dom:custEmail} ~\\
        \ref{dom:bringSmartphone} \useitemtext{dom:bringSmartphone} ~\\
        \ref{dom:timeArrival} \useitemtext{dom:timeArrival} ~\\


        \item[\ref{goal:easyExp}] \useitemtext{goal:easyExp} ~\\
        \ref{req:custTicket} \useitemtext{req:custTicket} ~\\
        \ref{req:custNum} \useitemtext{req:custNum} ~\\
        \ref{req:custTime} \useitemtext{req:custTime} ~\\
        \ref{req:custLeave} \useitemtext{req:custLeave} ~\\
        \ref{req:custFilter} \useitemtext{req:custFilter} ~\\
        \ref{req:custBook} \useitemtext{req:custBook} ~\\
        \ref{req:custDelete} \useitemtext{req:custDelete} ~\\
        \ref{req:custNotifyDelete} \useitemtext{req:custNotifyDelete} ~\\

        \ref{dom:smartphone} \useitemtext{dom:smartphone} ~\\
        \ref{dom:workingGps} \useitemtext{dom:workingGps} ~\\
        \ref{dom:uniqueName} \useitemtext{dom:uniqueName} ~\\
        \ref{dom:qrServiceReliable} \useitemtext{dom:qrServiceReliable} ~\\
        \ref{dom:storeRegistered} \useitemtext{dom:storeRegistered} ~\\
        \ref{dom:storeKiosk} \useitemtext{dom:storeKiosk} ~\\


        \item[\ref{goal:enjoyService}] \useitemtext{goal:enjoyService} ~\\

        \ref{req:custQueue} \useitemtext{req:custQueue} ~\\
        \ref{req:custTicketKiosk} \useitemtext{req:custTicketKiosk} ~\\
        \ref{req:custBook} \useitemtext{req:custBook} ~\\

        \ref{dom:smartphone} \useitemtext{dom:smartphone} ~\\
        \ref{dom:internetStores} \useitemtext{dom:internetStores} ~\\
        \ref{dom:storeRegistered} \useitemtext{dom:storeRegistered} ~\\
        \ref{dom:storeKiosk} \useitemtext{dom:storeKiosk} ~\\


        \item[\ref{goal:monitorAccess}] \useitemtext{goal:monitorAccess} ~\\

        \ref{req:mngLogin} \useitemtext{req:mngLogin} ~\\
        \ref{req:mngViewStore} \useitemtext{req:mngViewStore} ~\\
        \ref{req:mngViewQueue} \useitemtext{req:mngViewQueue} ~\\
        \ref{req:mngViewBook} \useitemtext{req:mngViewBook} ~\\
        \ref{req:stfLogin} \useitemtext{req:stfLogin} ~\\
        \ref{req:stfViewStore} \useitemtext{req:stfViewStore} ~\\
        \ref{req:stfViewQueue} \useitemtext{req:stfViewQueue} ~\\
        \ref{req:admRegister} \useitemtext{req:admRegister} ~\\
        \ref{req:admCredentials} \useitemtext{req:admCredentials} ~\\

        \ref{dom:internetStores} \useitemtext{dom:internetStores} ~\\
        \ref{dom:employeeEntrance} \useitemtext{dom:employeeEntrance} ~\\
        \ref{dom:storeRegistered} \useitemtext{dom:storeRegistered} ~\\
        \ref{dom:capStores} \useitemtext{dom:capStores} ~\\


        \item[\ref{goal:knowInAdvance}] \useitemtext{goal:knowInAdvance} ~\\
        \ref{req:mngViewStore} \useitemtext{req:mngViewStore} ~\\
        \ref{req:mngViewQueue} \useitemtext{req:mngViewQueue} ~\\
        \ref{req:mngViewBook} \useitemtext{req:mngViewBook} ~\\
        \ref{req:stfViewStore} \useitemtext{req:stfViewStore} ~\\
        \ref{req:stfViewQueue} \useitemtext{req:stfViewQueue} ~\\

        \ref{dom:smartphone} \useitemtext{dom:smartphone} ~\\
        \ref{dom:categories} \useitemtext{dom:categories} ~\\
        \ref{dom:internetStores} \useitemtext{dom:internetStores} ~\\
        \ref{dom:storeRegistered} \useitemtext{dom:storeRegistered} ~\\


        \item[\ref{goal:limitNumber}] \useitemtext{goal:limitNumber} ~\\

        \ref{req:mngCapStore} \useitemtext{req:mngCapStore} ~\\
        \ref{req:mngCapQueue} \useitemtext{req:mngCapQueue} ~\\
        \ref{req:mngDeleteTickets} \useitemtext{req:mngDeleteTickets} ~\\

        \ref{dom:smartphone} \useitemtext{dom:smartphone} ~\\
        \ref{dom:categories} \useitemtext{dom:categories} ~\\
        \ref{dom:internetStores} \useitemtext{dom:internetStores} ~\\
        \ref{dom:storeRegistered} \useitemtext{dom:storeRegistered} ~\\
        \ref{dom:timeArrival} \useitemtext{dom:timeArrival} ~\\
        \ref{dom:capStores} \useitemtext{dom:capStores} ~\\
    \end{description}

    \subsection{Scenarios}

    \subsection{Use cases description}
    % Use cases capture functional requirements of a system from the users' perspective.


    \subsection{Traceability matrix}
    \begin{center}
        \begin{tabular}{@{}p{0.25\linewidth}cccc@{}}
            \toprule
            \textbf{Item} & \textbf{\ref{req:custQueue}} & \textbf{\ref{req:custTicket}}
            & \textbf{\ref{req:custTime}} & \textbf{\ref{req:custNum}}\\
            \midrule
            Lorem Ipsum & \cmark \\
            Dolor Sit & & & \cmark \\

            \bottomrule
        \end{tabular}
    \end{center}


\section{Performance Requirements}

\section{Design Constraints}

\section{Software System Attributes}